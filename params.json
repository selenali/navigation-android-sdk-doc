{
  "name": "腾讯地图导航SDK（Android版）",
  "tagline": "Tencent Map Navigation SDK",
  "body": "腾讯地图导航SDK开发指南（Android版）\r\n====================================\r\n\r\n概述\r\n----\r\n\r\n腾讯地图导航SDK（Android版）是一套基于Android\r\n2.3及以上设备的应用程序接口，通过该接口，您可以轻松使用腾讯地图导航服务。下面对腾讯地图导航流程做简要概述：\r\n\r\n腾讯地图导航SDK主要负责导航参数设置，如起终点、导航偏好、途径点等，然后进行路线规划。当路线规划成功后，将规划的导航路线传递给导航引擎，导航引擎结合定位信息，进行导航，然后再将导航信息回调给导航SDK。导航SDK根据回调，使用腾讯地图SDK资源进行导航过程的展示。\r\n\r\nAPI是提供给那些具有一定Android编程经验和了解面向对象概念的读者使用。此外，读者还应该对导航产品有一定的了解。您在使用中遇到任何问题，都可以及时向我们反馈。\r\n\r\n环境搭建\r\n--------\r\n\r\n这里我们只提供eclipse 和Android\r\nStudio下的腾讯地图导航SDK的工程配置方法。\r\n\r\n#### 1、准备工作\r\n\r\n腾讯地图导航SDK使用腾讯地图SDK（3D地图矢量版）的资源进行导航的展示工作，因此您在使用导航SDK之前，应先配置腾讯地图SDK环境，具体请您参考[*腾讯地图SDK开发指南*](http://lbs.qq.com/android_v1/guide.html)。\r\n\r\n#### 2、eclipse\r\n\r\n将下载到的压缩包解压，将\"TencentNaviSDK\\_\\*.jar\"（该jar包命名规则为\r\nTencentNaviSDK<span id=\"OLE_LINK1\" class=\"anchor\"><span id=\"OLE_LINK2\"\r\nclass=\"anchor\"></span></span>\\_vX.X.X.jar,\r\nX.X.X为三位版本号）拷贝到工程目录的libs文件夹下，此外，您还需要将对应平台的so文件拷贝到工程目录libs文件夹下对应的平台目录，如下图所示：\r\n\r\n![](media/image1.png)\r\n\r\n注：libtxnavengine.so为导航引擎库；libwebpJNI.so为wepb库，用于路口放大图、电子眼放大图的解码。导航SDK中不含语音播放库，如果使用语音导航，请使用自己的语音库进行语音解码。\r\n\r\n#### 3、Android Studio\r\n\r\n方法一：将下载到的压缩包解压，将下载到的压缩包解压，将\"TencentNaviSDK\\_\\*.jar\"（该jar包命名规则为\r\nTencentNaviSDK\\_vX.X.X.jar,\r\nX.X.X为三位版本号）拷贝到app/libs/文件夹下，右键选择\"Add As Library\"。\r\n\r\n![](media/image2.png)\r\n\r\n此外，需要您在app/src/main/目录下新建jniLibs目录，根据平台的不同将so文件放到对应平台的目录下，如图所示：\r\n\r\n![](media/image3.png)\r\n\r\n方法二：在\"Project Structure\"中选择\"Dependencies\", 点击\"+\"选择\"File\r\ndependency\", 选择要添加到工程的jar包即完成开发包的导入，如图所示：\r\n\r\n![](media/image4.png)\r\n\r\n此外，需要您在app/src/main/目录下新建jniLibs目录，根据平台的不同将so文件放到对应平台的目录下，如图所示：\r\n\r\n![](media/image3.png)\r\n\r\n注：libtxnavengine.so为导航引擎库；libwebpJNI.so为wepb库，用于路口放大图、电子眼放大图的解码。导航SDK中不含语音播放库，如果使用语音导航，请使用自己的语音库进行语音解码。\r\n\r\n导航Demo工程设置\r\n----------------\r\n\r\n#### 1、添加权限\r\n\r\n导航sdk需要使用网络，访问硬件存储等系统权限，在AndroidManifest.xml文件里，添加如下权限：\r\n\r\n&lt;uses-permission android:name=*\"android.permission.INTERNET\"* /&gt;\r\n\r\n&lt;uses-permission\r\nandroid:name=*\"android.permission.ACCESS\\_NETWORK\\_STATE\"* /&gt;\r\n\r\n&lt;uses-permission\r\nandroid:name=*\"android.permission.ACCESS\\_WIFI\\_STATE\"* /&gt;\r\n\r\n&lt;uses-permission\r\nandroid:name=*\"android.permission.ACCESS\\_COARSE\\_LOCATION\"* /&gt;\r\n\r\n&lt;uses-permission\r\nandroid:name=*\"android.permission.ACCESS\\_FINE\\_LOCATION\"* /&gt;\r\n\r\n&lt;uses-permission\r\nandroid:name=*\"android.permission.ACCESS\\_MOCK\\_LOCATION\"* /&gt;\r\n\r\n&lt;uses-permission\r\nandroid:name=*\"android.permission.WRITE\\_EXTERNAL\\_STORAGE\"* /&gt;\r\n\r\n&lt;uses-permission\r\nandroid:name=*\"android.permission.READ\\_PHONE\\_STATE\"* /&gt;\r\n\r\n&lt;uses-permission android:name=*\"android.permission.CALL\\_PHONE\"*\r\n/&gt;\r\n\r\n&lt;uses-permission\r\nandroid:name=*\"android.permission.READ\\_PHONE\\_STATE\"* /&gt;\r\n\r\n&lt;uses-permission\r\nandroid:name=*\"android.permission.READ\\_PHONE\\_SINTERNETWIFI\\_STATE\"*\r\n/&gt;\r\n\r\n&lt;uses-permission android:name=*\"android.permission.WAKE\\_LOCK\"* /&gt;\r\n\r\n&lt;uses-permission\r\nandroid:name=*\"android.permission.CHANGE\\_WIFI\\_STATE\"* /&gt;\r\n\r\n#### 2、使用地图\r\n\r\n导航SDK使用腾讯地图SDK资源进行导航展示，该地图SDK的详细使用说明，请参考[*腾讯地图SDK开发指南*](http://lbs.qq.com/android_v1/guide.html)。Demo工程的AndroidManifest.xml文件中，在application节点里，添加名称为TencentMapSDK的meta信息，用于填写开发秘钥。开发秘钥可以到[*这里*](http://lbs.qq.com/key.html)申请。\r\n\r\n&lt;application\r\n\r\nandroid:allowBackup=\"true\"\r\n\r\nandroid:icon=\"@drawable/ic\\_launcher\"\r\n\r\nandroid:label=\"@string/app\\_name\"\r\n\r\nandroid:theme=\"@style/AppTheme\" &gt;\r\n\r\n&lt;meta-data\r\n\r\nandroid:name=\"TencentMapSDK\"\r\n\r\nandroid:value=\"您的腾讯地图SDK秘钥\" /&gt;\r\n\r\n&lt;/application&gt;\r\n\r\n#### 3、导航流程与参数配置\r\n\r\n导航SDK主要负责导航参数设置，如起点，终点等，然后启动异步线程规划路线，路线规划成功后，把导航路线给导航引擎。<span\r\nid=\"OLE_LINK5\" class=\"anchor\"><span id=\"OLE_LINK6\"\r\nclass=\"anchor\"></span></span>导航引擎结合定位SDK，进行导航，把导航信息回调给导航SDK。导航SDK根据回调，使用地图SDK进行导航过程的展示。流程图如下：\r\n\r\n![](media/image5.png)\r\n\r\n###### TencentNavigationManager类\r\n\r\n导航SDK的设置是通过<span id=\"OLE_LINK3\" class=\"anchor\"><span\r\nid=\"OLE_LINK4\"\r\nclass=\"anchor\"></span></span>TencentNavigationManager类进行设置，并由该类暴露对外调用接口，TencentNavigationManager设置底图、比例尺缩放级别、设置导航过程中是否显示电子眼和路口放大图，设置导航的起终点等基本导航设置。此外对于导航的各种回调监听也是绑定到TencentNavigationManager。下面是TencentNavigationManager类的使用示。\r\n\r\n// 定义TencentNaviManager对象\r\n\r\n**private** TencentNavigationManager tencentNaviManager = **null**;\r\n\r\n@Override\r\n\r\n**protected** **void** onCreate(Bundle savedInstanceState) {\r\n\r\n**super**.onCreate(savedInstanceState);\r\n\r\n// 获取TencentNaviManager实例\r\n\r\ntencentNaviManager = TencentNavigationManager.*getInstance*(**this**);\r\n\r\n> // 设置tts语音模块监听\r\n\r\ntencentNaviManager.setTtsListener(ttsListener);\r\n\r\n> // 设置设置地图对象，这里使用TencentMap的实例\r\n\r\ntencentNaviManager.setMapView(mMap.getMapView());\r\n\r\n> // 设置算路回调，非偏航\r\n\r\ntencentNaviManager.setSearchRouteCallbck(searchRouteCallback);\r\n\r\n> // 设置偏航算路回调\r\n\r\ntencentNaviManager.setSearchOffRouteCallback(searchOffRouteCallback);\r\n\r\n// 是否开启路口放大图功能\r\n\r\ntencentNaviManager.setCrossingEnlargePictureEnable(**true**);\r\n\r\n> // 设置导航过程中3d模式下，车标位于屏幕的比例\r\n\r\ntencentNaviManager.setNaviFixingProportion(0.5f, 0.75f);\r\n\r\n> // 是否开启电子眼放大图功能\r\n\r\ntencentNaviManager.setElectriEyesPictureEnable(**true**);\r\n\r\n> // 是否显示导航的Overlay\r\n\r\ntencentNaviManager.setNavigationOverlayEnable(**true**);\r\n\r\n}\r\n\r\n###### 设置起点、终点以及途径点\r\n\r\n设置起点：tencentNaviManager.setStartPosition(startPosition);\r\n\r\n设置终点：tencentNaviManager.setDestinationPosition (destLatlng);\r\n\r\n设置途径点：List&lt;LatLng&gt; listPass = **new**\r\nArrayList&lt;LatLng&gt;();\r\n\r\nlistPass.add(passPoint);\r\n\r\ntencentNaviManager.setWayPoints(listPass);\r\n\r\n###### 算路\r\n\r\n导航<span id=\"OLE_LINK9\" class=\"anchor\"><span id=\"OLE_LINK10\"\r\nclass=\"anchor\"></span></span>SDK启动异步线程规划路线，路线规划成功后，把导航路线给导航引擎。\r\n\r\n<span id=\"OLE_LINK7\" class=\"anchor\"><span id=\"OLE_LINK8\"\r\nclass=\"anchor\"></span></span>算路：tencentNaviManager.calculateRoute();\r\n\r\n使用SearchRouteTask进行异步的路线规划，SearchRouteTask的详情请参考API文档。\r\n\r\nDemo规划的路线如图所示：\r\n\r\n![](media/image6.png)\r\n\r\n###### 开始导航与结束导航\r\n\r\n导航引擎结合定位SDK，进行导航，把导航信息回调给导航SDK。导航SDK根据回调，使用地图SDK进行导航过程的展示。\r\n\r\n开始导航：tencentNaviManager.startNavi();\r\n\r\n结束导航：tencentNaviManager.stopNavi();\r\n\r\n导航过程中的地图展示：\r\n\r\n![](media/image7.png)\r\n\r\n![](media/image8.png)\r\n\r\n导航资源包括：\r\n\r\n导航定位图标：![](media/image9.png)\r\n\r\n实时路况信息（彩虹蚯蚓）：![](media/image10.png)\r\n\r\n走过的路置灰：![](media/image11.png)\r\n\r\n路口放大图：![](media/image12.png)\r\n\r\n其他的资源如车道线信息，电子眼放大图等，请您参考API文档。\r\n\r\n###### 导航回调\r\n\r\n导航SDK提供了丰富的回调函数，来回调导航中的操作。所有的回调事件都绑定在TencentNavigationManager对象上，下面列出了腾讯地图导航支持的回调：\r\n\r\n  导航过程中回调 TencentNavigationManager.TencentNaviCallback\r\n  ------------------------- ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n  查询路线回调 （非偏航）   TencentNavigationManager.SearchRouteCallback\r\n  查询偏航路线回调          TencentNavigationManager.SearchOffRouteCallback\r\n\r\n上述回调的具体信息，请您参阅API文档。\r\n\r\n注意事项\r\n--------\r\n\r\n1.  项目必须使用utf8编码格式，如果出现类似“at\r\n    java.net.URLEncoder.encode”的错误，请检查项目编码格式。\r\n\r\n2.  导航SDK使用腾讯地图SDK（3D地图矢量版）的地图资源进行展示。请您预先配置腾讯地图SDK环境。\r\n\r\n3.  导航SDK不包含定位功能，建议用户使用腾讯定位SDK。\r\n\r\n4.  导航SDK不包含语音播报库，建议用户使用TTS语音进行语音播报。\r\n\r\n5.  如有问题，可以到腾讯地图开发者论坛，或者技术支持qq群寻求帮助。\r\n",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}